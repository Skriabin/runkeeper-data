<!DOCTYPE html>
<html lang="en">
    <style>
    </style>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.css">
    </head>
    <body>
        <div id="header">
            <h1 class="inline-text">Runkeeper Data Tracker</h1>
            {% if get_flashed_messages() %}
                    <h2 class="inline-text title-spacer">|</h2>
                    <h2 class="inline-text title-append">{{ get_flashed_messages() }} </h2>
            {% endif %}
            
        </div>
        <div id="page">
            <div id="form-submission">
                <form enctype=multipart/form-data action="/upload" method="POST">
                    <label for="csv">Select a CSV file:</label><br>
                    <input type="file" id="csv" value="Select CSV..." name="file">
                    <input type="submit" value="Submit">
                </form>
            </div>

            
            <div class="flex-container">
                <div id="table-container" class="flex-child">
                </div>
                <div id="chart-container" class="flex-child flex-center">
                    <canvas id="myChart"></canvas>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

        <script src="static/main.js"></script>

        <script>
            var sort_state = 0;

            
            {% if file_data %}
                // convert json to variable & render table:
                
                const val = JSON.parse({{ file_data | tojson }});
                const chart_val = JSON.parse({{ file_data | tojson }});
                myTable = render_table(val);
                myChart = render_graph(chart_val);
                
                
            {% endif %}

        </script>        
    </body>
</html>